---
import Layout from '../layouts/Layout.astro';
import { Icon } from 'astro-icon/components';
import { aboutPageConfig } from '../config/pages';
import CTA from '../components/CTA.astro';

// Extract sections from config
const aboutHeroSection = aboutPageConfig.sections.find(section => section.type === "aboutHero");
const storySection = aboutPageConfig.sections.find(section => section.type === "story");
const valuesSection = aboutPageConfig.sections.find(section => section.type === "values");
const teamSection = aboutPageConfig.sections.find(section => section.type === "team");
const ctaSection = aboutPageConfig.sections.find(section => section.type === "cta");
---

<Layout 
  title={aboutPageConfig.title}
  description={aboutPageConfig.description}
  ogType={aboutPageConfig.ogType}
>
  <!-- Hero Section -->
  {aboutHeroSection && (
    <section class="section-padding" style="background: linear-gradient(to bottom, rgba(79, 70, 229, 0.1), white);">
      <div class="container text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-6">{aboutHeroSection.title}</h1>
        <p class="text-xl max-w-3xl mx-auto" style="color: var(--color-text-light);">
          {aboutHeroSection.subtitle}
        </p>
      </div>
    </section>
  )}

  <!-- Our Story -->
  {storySection && (
    <section class="section-padding">
      <div class="container">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
          <div>
            <h2 class="text-3xl font-bold mb-6">{storySection.title}</h2>
            {storySection.paragraphs.map(paragraph => (
              <p class="mb-6" style="color: var(--color-text-light);">{paragraph}</p>
            ))}
          </div>
          <div class="p-8 flex flex-col items-center text-center" style="background-color: var(--color-background-alt); border-radius: var(--radius-lg);">
            <Icon name={storySection.mission.icon} class="w-16 h-16 mb-4" style="color: var(--color-primary);" />
            <h3 class="text-2xl font-bold mb-4">{storySection.mission.title}</h3>
            <p style="color: var(--color-text-light);">
              {storySection.mission.description}
            </p>
          </div>
        </div>
      </div>
    </section>
  )}

  <!-- Company Values -->
  {valuesSection && (
    <section class="section-padding" style="background-color: var(--color-background-alt);">
      <div class="container">
        <div class="text-center mb-16">
          <h2 class="text-3xl font-bold mb-4">{valuesSection.title}</h2>
          <p class="max-w-2xl mx-auto" style="color: var(--color-text-light);">
            {valuesSection.subtitle}
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          {valuesSection.values.map(value => (
            <div class="p-6 flex flex-col items-center text-center" style="background-color: var(--color-background); border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); border: 1px solid var(--color-text-lighter);">
              <Icon name={value.icon} class="w-12 h-12 mb-4" style="color: var(--color-primary);" />
              <h3 class="text-xl font-bold mb-2">{value.title}</h3>
              <p style="color: var(--color-text-light);">{value.description}</p>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Team Section -->
  {teamSection && (
    <section class="section-padding">
      <div class="container">
        <div class="text-center mb-16">
          <h2 class="text-3xl font-bold mb-4">{teamSection.title}</h2>
          <p class="max-w-2xl mx-auto" style="color: var(--color-text-light);">
            {teamSection.subtitle}
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          {teamSection.members.map(member => (
            <div class="p-6 flex flex-col items-center text-center" style="background-color: var(--color-background); border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); border: 1px solid var(--color-text-lighter);">
              <div class="w-24 h-24 rounded-full flex items-center justify-center mb-4" style="background-color: var(--color-background-alt);">
                <Icon name={member.icon} class="w-12 h-12" style="color: var(--color-text-lighter);" />
              </div>
              <h3 class="text-xl font-bold mb-1">{member.name}</h3>
              <p class="mb-4" style="color: var(--color-primary);">{member.position}</p>
              <p style="color: var(--color-text-light);">{member.bio}</p>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- CTA Section -->
  {ctaSection && (
    <CTA 
      title={ctaSection.title}
      subtitle={ctaSection.subtitle}
      ctaText={ctaSection.ctaPrimary.text}
      ctaLink={ctaSection.ctaPrimary.link}
      secondaryText={ctaSection.ctaSecondary?.text}
      secondaryLink={ctaSection.ctaSecondary?.link}
    />
  )}
</Layout>